# MTG Commander AI - System Architecture

## High-Level Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      GAME STARTS                            â”‚
â”‚  â€¢ Initialize 2-4 players with 100-card decks               â”‚
â”‚  â€¢ Each player draws 7 cards                                â”‚
â”‚  â€¢ Set first active player                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   TURN BEGINS                               â”‚
â”‚  Phase: Beginning â†’ Main â†’ Combat â†’ Main â†’ End             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              LLM AGENT ACTIVATES                            â”‚
â”‚                                                              â”‚
â”‚  1. ğŸ§  Analyze: What's happening?                           â”‚
â”‚     â”œâ”€ Call get_game_state()                                â”‚
â”‚     â”œâ”€ Call analyze_threats()                               â”‚
â”‚     â””â”€ Review: Life totals, board state, resources          â”‚
â”‚                                                              â”‚
â”‚  2. ğŸ¯ Plan: What's my goal?                                â”‚
â”‚     â”œâ”€ Win condition assessment                             â”‚
â”‚     â”œâ”€ Resource management                                  â”‚
â”‚     â””â”€ Threat prioritization                                â”‚
â”‚                                                              â”‚
â”‚  3. ğŸ” Explore: What can I do?                              â”‚
â”‚     â””â”€ Call get_legal_actions()                             â”‚
â”‚                                                              â”‚
â”‚  4. ğŸ¤” Evaluate: Chain-of-Thought Reasoning                 â”‚
â”‚     â”œâ”€ "If I play this land..."                             â”‚
â”‚     â”œâ”€ "If I attack with this creature..."                  â”‚
â”‚     â”œâ”€ "What are the risks?"                                â”‚
â”‚     â””â”€ "What's the expected value?"                         â”‚
â”‚                                                              â”‚
â”‚  5. âœ… Decide: Choose best action                           â”‚
â”‚     â””â”€ Call execute_action(...)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              RULES ENGINE VALIDATES                          â”‚
â”‚                                                              â”‚
â”‚  â€¢ Is this action legal?                                     â”‚
â”‚  â€¢ Does player have resources?                               â”‚
â”‚  â€¢ Correct phase/step?                                       â”‚
â”‚  â€¢ Valid targets?                                            â”‚
â”‚                                                              â”‚
â”‚  âœ… If valid â†’ Execute                                       â”‚
â”‚  âŒ If invalid â†’ Reject (agent tries again)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               ACTION EXECUTES                                â”‚
â”‚                                                              â”‚
â”‚  â€¢ Update game state                                         â”‚
â”‚  â€¢ Move cards between zones                                 â”‚
â”‚  â€¢ Adjust life totals                                        â”‚
â”‚  â€¢ Resolve combat damage                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            CHECK WIN CONDITIONS                              â”‚
â”‚                                                              â”‚
â”‚  â€¢ Any player at 0 life?                                     â”‚
â”‚  â€¢ 21 commander damage?                                      â”‚
â”‚  â€¢ Only one player left?                                     â”‚
â”‚                                                              â”‚
â”‚  If yes â†’ GAME OVER                                          â”‚
â”‚  If no â†’ Continue to next action/phase                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow: Making a Decision

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LLM Agent   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. Request game state
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  get_game_state()    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tool                â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ 2. Reads from
       â”‚                        â”‚
       â”‚ Returns JSON           â”‚
       â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LLM Agent   â”‚         â”‚ Game State  â”‚
â”‚  (Reasoning) â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤  Object     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 3. "I should play a land"
       â”‚
       â”‚ 4. Request legal actions
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ get_legal_actions()  â”‚
â”‚  Tool                â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 5. Returns available moves
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LLM Agent   â”‚
â”‚  (Decision)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 6. execute_action("play_land", card_id="...")
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ execute_action()     â”‚
â”‚  Tool                â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 7. Forwards to rules engine
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Rules Engine        â”‚
â”‚  â€¢ Validates         â”‚â”€â”€â”€â”€â–º âŒ Invalid â†’ Return error
â”‚  â€¢ Executes          â”‚
â”‚  â€¢ Updates state     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ âœ… Success
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LLM Agent   â”‚
â”‚  (Continue)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Interactions

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        MTG Agent                            â”‚
â”‚                                                              â”‚
â”‚  Properties:                                                 â”‚
â”‚  â€¢ game_state: GameState                                     â”‚
â”‚  â€¢ rules_engine: RulesEngine                                 â”‚
â”‚  â€¢ llm_client: OpenAI/Anthropic/Ollama                       â”‚
â”‚  â€¢ tools: Dict[str, Tool]                                    â”‚
â”‚  â€¢ messages: List[Message]  # conversation history          â”‚
â”‚                                                              â”‚
â”‚  Methods:                                                    â”‚
â”‚  â€¢ take_turn_action() â†’ bool                                 â”‚
â”‚  â€¢ analyze_position() â†’ Dict                                 â”‚
â”‚  â€¢ _make_decision() â†’ Action                                 â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚              â”‚              â”‚                â”‚
     â”‚ Uses         â”‚ Uses         â”‚ Uses           â”‚ Uses
     â–¼              â–¼              â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Game   â”‚  â”‚  Rules   â”‚  â”‚   Tools     â”‚  â”‚    LLM     â”‚
â”‚  State  â”‚  â”‚  Engine  â”‚  â”‚   Layer     â”‚  â”‚   Client   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚              â”‚              â”‚                â”‚
     â”‚              â”‚              â”‚                â”‚
     â”œâ”€ Players[]   â”œâ”€ play_land() â”œâ”€ get_game_    â”‚
     â”œâ”€ Turn info   â”œâ”€ cast_spell()â”‚    state()     â”‚
     â”œâ”€ Phase/Step  â”œâ”€ combat()    â”œâ”€ get_legal_   â”‚
     â”œâ”€ Stack[]     â”œâ”€ validate()  â”‚    actions()   â”‚
     â””â”€ Winner      â””â”€ advance()   â”œâ”€ execute_     â”‚
                                   â”‚    action()    â”‚
                                   â””â”€ analyze_     â”‚
                                       threats()    â”‚
```

---

## Example Decision Tree: Combat Phase

```
                        Combat Phase
                             â”‚
                             â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ Declare Attackersâ”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                â”‚                â”‚
          â–¼                â–¼                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Attack   â”‚    â”‚ Attack   â”‚    â”‚  Don't   â”‚
    â”‚ Player A â”‚    â”‚ Player B â”‚    â”‚  Attack  â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
          â”‚               â”‚               â”‚
          â”‚               â”‚               â”‚
    "High threat"    "Low life"      "Need to"
    "Must kill"      "Easy target"   "defend"
          â”‚               â”‚               â”‚
          â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     LLM Evaluates Each Option:       â”‚
    â”‚                                       â”‚
    â”‚  â€¢ Expected damage dealt              â”‚
    â”‚  â€¢ Risk of losing creatures           â”‚
    â”‚  â€¢ Political consequences             â”‚
    â”‚  â€¢ Board state after combat           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Best Move  â”‚
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
              execute_action()
```

---

## State Machine: Turn Structure

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    BEGINNING PHASE                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          â”‚
          â”œâ”€â–º Untap Step    (Automatic: untap all)
          â”œâ”€â–º Upkeep Step   (Triggered abilities)
          â””â”€â–º Draw Step     (Automatic: draw 1 card)
          â”‚
          â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                 PRECOMBAT MAIN PHASE                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          â”‚
          â”‚ Player can:
          â”œâ”€â–º Play land (once per turn)
          â”œâ”€â–º Cast spells (creatures, sorceries, etc.)
          â”œâ”€â–º Activate abilities
          â””â”€â–º Pass priority
          â”‚
          â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                     COMBAT PHASE                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          â”‚
          â”œâ”€â–º Begin Combat   (Last chance for instants)
          â”œâ”€â–º Declare Attackers (Active player chooses attackers)
          â”œâ”€â–º Declare Blockers  (Defenders choose blockers)
          â”œâ”€â–º Combat Damage     (Deal damage, creatures die)
          â””â”€â–º End Combat        (Combat over)
          â”‚
          â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                POSTCOMBAT MAIN PHASE                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          â”‚
          â”‚ (Same as precombat main phase)
          â”‚
          â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                      ENDING PHASE                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          â”‚
          â”œâ”€â–º End Step      (End of turn triggers)
          â””â”€â–º Cleanup Step  (Discard to 7, clear damage)
          â”‚
          â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    NEXT PLAYER'S TURN                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## Why Agentic Architecture Works for MTG

### Traditional Approach (Fine-tuning) âŒ
```
Large Dataset of Games
        â”‚
        â–¼
  Fine-tune LLM
        â”‚
        â–¼
  Generate Action
        â”‚
        â–¼
   Hope it's legal? ğŸ¤
```

**Problems**:
- Need millions of game examples
- Model might hallucinate illegal moves
- Hard to debug when it fails
- Expensive to train and update
- Can't explain decisions

### Agentic Approach (Tool Use) âœ…
```
Base LLM (GPT-4, Claude, etc.)
        â”‚
        â–¼
   Call tools to:
   â€¢ See game state
   â€¢ Get legal moves
   â€¢ Execute validated action
        â”‚
        â–¼
   Always legal! âœ…
```

**Benefits**:
- No training data needed
- All moves validated by rules engine
- Easy to debug (see tool calls)
- Can explain reasoning (CoT)
- Iterate quickly without retraining

---

## Chain-of-Thought Example

```
USER: "It's your main phase. What do you do?"

LLM (Internal reasoning):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ANALYZE                              â”‚
â”‚    - I have 5 life (danger!)            â”‚
â”‚    - Opponent has 20 life               â”‚
â”‚    - Opponent has 3 creatures attacking â”‚
â”‚    - I have 2 blockers                  â”‚
â”‚    - I have 4 mana available            â”‚
â”‚                                         â”‚
â”‚ 2. THREATS                              â”‚
â”‚    - Will die next turn if I don't act â”‚
â”‚    - Need blockers or removal           â”‚
â”‚                                         â”‚
â”‚ 3. OPTIONS                              â”‚
â”‚    - Cast Serra Angel (4/4 flying)      â”‚
â”‚    - Cast Lightning Bolt (3 damage)     â”‚
â”‚    - Play another land                  â”‚
â”‚                                         â”‚
â”‚ 4. EVALUATE                             â”‚
â”‚    - Serra Angel: Good blocker,         â”‚
â”‚      but doesn't stop all attackers     â”‚
â”‚    - Lightning Bolt: Removes one        â”‚
â”‚      creature, saves 3 life             â”‚
â”‚    - Land: Doesn't help immediately     â”‚
â”‚                                         â”‚
â”‚ 5. DECISION                             â”‚
â”‚    - Cast Lightning Bolt on biggest     â”‚
â”‚      creature, then cast Serra Angel    â”‚
â”‚      if mana allows                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LLM (Tool calls):
1. execute_action("cast_spell", card_id="lightning_bolt", target="opponent_creature_1")
2. execute_action("cast_spell", card_id="serra_angel")
```

---

This architecture allows the AI to:
1. **Understand** the game through tools
2. **Reason** about strategy using LLM capabilities  
3. **Act** through validated, legal moves
4. **Learn** by analyzing past games (future)
5. **Explain** its decisions (transparency)
